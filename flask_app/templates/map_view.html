{% block header %}
  <h1>Toronto Live Bike Share</h1>

{% endblock %}

{% block content %}
    <form action="/search_available" onsubmit="return validateForm()" method="POST">
        <p>Search parameters:</p>
        <label for="lat">Latitude:</label>
        <input type="number" step="0.000001" name="lat" id="lat">

        <label for="lon">Longitude:</label>
        <input type="number" step="0.000001" name="lon" id="lon">

        <label for="k_value">K value:</label>
        <input type="number" name="k_value" id="k_value">
        <p>Search for:</p>
        <input type="radio" id="bikes" name="search_for" value="bikes" checked>
        <label for="bikes">bikes</label>
        <input type="radio" id="docks" name="search_for" value="docks">
        <label for="docks">docks</label><br>

        <input type="submit" value="Search">
    </form>
{% endblock %}


<script>

function isLatitude(lat) {
    if (lat === "") {
        alert("Value of latitude is incorrect");
        return false; // Prevent form submission
    }

    return isFinite(lat) && Math.abs(lat) <= 90;
}

function isLongitude(lon) {

    if (lon === "") {
        alert("Value of longitude is incorrect");
        return false; // Prevent form submission
    }

    return isFinite(lon) && Math.abs(lon) <= 180;
}

function isKValue(k_value) {

    if (k_value === "") {
        alert("Value of k is incorrect");
        return false; // Prevent form submission
    }

    if (isNaN(k_value) || k_value < 1) {
        return false;
    }
    return true;
}

function validateForm() {
    // Get the value of the input field with id="numb"
    let lat = document.getElementById("lat").value;
    let lon = document.getElementById("lon").value;
    let k_value = document.getElementById("k_value").value;

    let lat_check = isLatitude(lat);
    let lon_check = isLongitude(lon);
    let k_value_check = isKValue(k_value);

    if (lat_check === true && lon_check === true && k_value_check === true) {
        //console.log("values correct");
        return true;
    }
    return false;
}
</script>

{% extends 'folium_map.html' %}